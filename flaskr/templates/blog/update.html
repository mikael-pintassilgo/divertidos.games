{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Edit "{{ post['title'] }}"{% endblock %}</h1>
{% endblock %}

{% block content %}
  <form method="post">
    <label for="title">Title</label>
    <input name="title" id="title" value="{{ request.form['title'] or post['title'] }}" required>
    
    <label for="body">Body</label>
    <textarea name="body" id="body">{{ request.form['body'] or post['body'] }}</textarea>
    
    <label for="comment">Comment</label>
    <textarea name="comment" id="comment">{{ request.form['comment'] or post['comment'] }}</textarea>
    
    <input type="submit" value="Save">
  </form>
  <hr>
  <form action="{{ url_for('blog.delete', id=post['id']) }}" method="post">
    <input class="danger" type="submit" value="Delete" onclick="return confirm('Are you sure?');">
  </form>
  <hr>

  <!-- Tags -->
  <label>Tags</label>
  {% for tag in tags %}
    <article class="">
      <header>
        <div>
          <h1>{{ tag['title'] }}</h1>
          <form action="{{ url_for('blog.delete_element_tag', id=tag['id']) }}" method="post">
            <input class="danger" type="submit" value="Delete tag" onclick="return confirm('Are you sure?');">
          </form>
        </div>
      </header>
    </article>
    {% if not loop.last %}
      <hr>
    {% endif %}
  {% endfor %}

  <form action="{{ url_for('blog.create_tag', id=post['id']) }}" method="post">
    <label for="tag_title">New tag</label>
    <input name="tag_title" id="tag_title" value="{{ request.form['tag_title'] }}" required>
    
    <input type="submit" value="Add tag">
  </form>


  <!-- Links -->
  <label>Links</label>
  {% for link in links %}
    <article class="">
      <header>
        <div>
          <a href="{{ link['title'] }}" target="_blank">{{ link['title'] }}</a>
          <form action="{{ url_for('blog.delete_element_link', id=link['id']) }}" method="post">
            <input class="danger" type="submit" value="Delete link" onclick="return confirm('Are you sure?');">
          </form>
        </div>
      </header>
    </article>
    {% if not loop.last %}
      <hr>
    {% endif %}
  {% endfor %}

  <form action="{{ url_for('blog.create_link', id=post['id']) }}" method="post">
    <label for="link_title">New link</label>
    <input name="link_title" id="link_title" value="{{ request.form['link_title'] }}" required>
    
    <input type="submit" value="Add link">
  </form>
{% endblock %}
